###############################################
# slurmdbd.conf - Configuration for SLURM DBD
# This daemon logs job accounting into a database
# Typically run on the SLURM controller node
###############################################

# -----------------------------
# ARCHIVE AND LOG MANAGEMENT
# -----------------------------

# Directory where SLURM DBD will write logs and optionally archived accounting data.
# Ensure this directory is writable by the SlurmUser.
# May include job data snapshots, accounting logs, etc.
ArchiveDir=/slurm/slurmica


# -----------------------------
# DAEMON LISTENING PARAMETERS
# -----------------------------

# Hostname of the node where this slurmdbd instance runs.
# It must match AccountingStorageHost in all slurm.conf files.
# If running on the controller, this can be 'localhost'.
DbdHost=luigi

# Port that slurmdbd listens on for connections from slurmctld and slurmd.
# Must match AccountingStoragePort in slurm.conf (default: 6819).
# Must be open in the firewall.
DbdPort=6819

# Location of PID file for the slurmdbd daemon.
# Used by systemd or init scripts to track and manage the process.
# Ensure this directory exists and is writable by the SlurmUser.
PidFile=/slurm/run/slurmdbd.pid


# ----------------------
# SLURM USER PARAMETERS
# ----------------------

# System user account under which slurmdbd runs.
# This user must have permission to access the database (e.g., via MySQL).
# Typically a dedicated `slurm` user with no shell access.
SlurmUser=slurm


# ------------------------
# DATABASE CONNECTION SETUP
# ------------------------

# Backend storage plugin used for accounting.
# 'accounting_storage/mysql' is the default and most widely supported.
# Note: PostgreSQL is *not* officially supported as of SLURM 24.
StorageType=accounting_storage/mysql

# Hostname or IP address of the MySQL/MariaDB server.
# 'localhost' is fine if the DB server is on the same machine.
# If using a remote host, consider enabling SSL/TLS for security.
StorageHost=localhost

# TCP port used to connect to MySQL/MariaDB.
# Default MySQL port is 3306.
StoragePort=3306

# MySQL/MariaDB username used by slurmdbd to authenticate with the DB.
# This user must have permission to:
# - CREATE, SELECT, INSERT, UPDATE, DELETE on the accounting database
StorageUser=slurm

# Password for the above MySQL/MariaDB user.
# ⚠️ SECURITY WARNING: Do not commit this file to version control.
# Protect it with filesystem permissions (chmod 600).
StoragePass=icaslurm

# Name of the database schema where SLURM will store accounting data.
# The DB will be created automatically if it does not exist, assuming privileges are sufficient.
StorageLoc=slurm_acct_db


